!function(n){"use strict";function r(n,r){var e;if("undefined"!=typeof window&&window.crypto)e=new Uint8Array(r),window.crypto.getRandomValues(e);else{if("undefined"==typeof require)throw new Error("no PRNG");var t=require("crypto");e=t?t.randomBytes(r):null}if(!e||e.length!==r)throw new Error("PRNG failed");for(var o=0;o<e.length;o++)n[o]=e[o]}function e(n,r){return n<<r|n>>>32-r}function t(n,r){var e=255&n[r+3];return e=e<<8|255&n[r+2],e=e<<8|255&n[r+1],e<<8|255&n[r+0]}function o(n,r){var e=n[r]<<24|n[r+1]<<16|n[r+2]<<8|n[r+3],t=n[r+4]<<24|n[r+5]<<16|n[r+6]<<8|n[r+7];return new lr(e,t)}function i(n,r,e){var t;for(t=0;4>t;t++)n[r+t]=255&e,e>>>=8}function f(n,r,e){n[r]=e.hi>>24&255,n[r+1]=e.hi>>16&255,n[r+2]=e.hi>>8&255,n[r+3]=255&e.hi,n[r+4]=e.lo>>24&255,n[r+5]=e.lo>>16&255,n[r+6]=e.lo>>8&255,n[r+7]=255&e.lo}function a(n,r,e,t,o){var i,f=0;for(i=0;o>i;i++)f|=n[r+i]^e[t+i];return(1&f-1>>>8)-1}function w(n,r,e,t){return a(n,r,e,t,16)}function u(n,r,e,t){return a(n,r,e,t,32)}function c(n,r,o,f,a){var w,u,c,y=new Uint32Array(16),h=new Uint32Array(16),l=new Uint32Array(16),s=new Uint32Array(4);for(w=0;4>w;w++)h[5*w]=t(f,4*w),h[1+w]=t(o,4*w),h[6+w]=t(r,4*w),h[11+w]=t(o,16+4*w);for(w=0;16>w;w++)l[w]=h[w];for(w=0;20>w;w++){for(u=0;4>u;u++){for(c=0;4>c;c++)s[c]=h[(5*u+4*c)%16];for(s[1]^=e(s[0]+s[3]|0,7),s[2]^=e(s[1]+s[0]|0,9),s[3]^=e(s[2]+s[1]|0,13),s[0]^=e(s[3]+s[2]|0,18),c=0;4>c;c++)y[4*u+(u+c)%4]=s[c]}for(c=0;16>c;c++)h[c]=y[c]}if(a){for(w=0;16>w;w++)h[w]=h[w]+l[w]|0;for(w=0;4>w;w++)h[5*w]=h[5*w]-t(f,4*w)|0,h[6+w]=h[6+w]-t(r,4*w)|0;for(w=0;4>w;w++)i(n,4*w,h[5*w]),i(n,16+4*w,h[6+w])}else for(w=0;16>w;w++)i(n,4*w,h[w]+l[w]|0)}function y(n,r,e,t){return c(n,r,e,t,!1),0}function h(n,r,e,t){return c(n,r,e,t,!0),0}function l(n,r,e,t,o,i,f){var a,w,u=new Uint8Array(16),c=new Uint8Array(64);if(!o)return 0;for(w=0;16>w;w++)u[w]=0;for(w=0;8>w;w++)u[w]=i[w];for(;o>=64;){for(y(c,u,f,mr),w=0;64>w;w++)n[r+w]=(e?e[t+w]:0)^c[w];for(a=1,w=8;16>w;w++)a=a+(255&u[w])|0,u[w]=255&a,a>>>=8;o-=64,r+=64,e&&(t+=64)}if(o>0)for(y(c,u,f,mr),w=0;o>w;w++)n[r+w]=(e?e[t+w]:0)^c[w];return 0}function s(n,r,e,t,o){return l(n,r,null,0,e,t,o)}function v(n,r,e,t,o){var i=new Uint8Array(32);return h(i,t,o,mr),s(n,r,e,t.subarray(16),i)}function b(n,r,e,t,o,i,f){var a=new Uint8Array(32);return h(a,i,f,mr),l(n,r,e,t,o,i.subarray(16),a)}function p(n,r){var e,t=0;for(e=0;17>e;e++)t=t+(n[e]+r[e]|0)|0,n[e]=255&t,t>>>=8}function g(n,r,e,t,o,i){var f,a,w,u,c=new Uint32Array(17),y=new Uint32Array(17),h=new Uint32Array(17),l=new Uint32Array(17),s=new Uint32Array(17);for(w=0;17>w;w++)y[w]=h[w]=0;for(w=0;16>w;w++)y[w]=i[w];for(y[3]&=15,y[4]&=252,y[7]&=15,y[8]&=252,y[11]&=15,y[12]&=252,y[15]&=15;o>0;){for(w=0;17>w;w++)l[w]=0;for(w=0;16>w&&o>w;++w)l[w]=e[t+w];for(l[w]=1,t+=w,o-=w,p(h,l),a=0;17>a;a++)for(c[a]=0,w=0;17>w;w++)c[a]+=h[w]*(a>=w?y[a-w]:320*y[a+17-w]|0)|0;for(a=0;17>a;a++)h[a]=c[a];for(u=0,w=0;16>w;w++)u=u+h[w]|0,h[w]=255&u,u>>>=8;for(u=u+h[16]|0,h[16]=3&u,u=5*(u>>>2)|0,w=0;16>w;w++)u=u+h[w]|0,h[w]=255&u,u>>>=8;u=u+h[16]|0,h[16]=u}for(w=0;17>w;w++)s[w]=h[w];for(p(h,Br),f=0|-(h[16]>>>7),w=0;17>w;w++)h[w]^=f&(s[w]^h[w]);for(w=0;16>w;w++)l[w]=i[w+16];for(l[16]=0,p(h,l),w=0;16>w;w++)n[r+w]=h[w];return 0}function _(n,r,e,t,o,i){var f=new Uint8Array(16);return g(f,0,e,t,o,i),w(n,r,f,0)}function A(n,r,e,t,o){var i;if(32>e)throw new Error("d < 32");for(b(n,0,r,0,e,t,o),g(n,16,n,32,e-32,n),i=0;16>i;i++)n[i]=0;return 0}function U(n,r,e,t,o){var i,f=new Uint8Array(32);if(32>e)return-1;if(v(f,0,32,t,o),0!==_(r,16,r,32,e-32,f))return-1;for(b(n,0,r,0,e,t,o),i=0;32>i;i++)n[i]=0;return 0}function d(n,r){var e;for(e=0;16>e;e++)n[e]=0|r[e]}function x(n){var r,e;for(e=0;16>e;e++)n[e]+=65536,r=Math.floor(n[e]/65536),n[(e+1)*(15>e?1:0)]+=r-1+37*(r-1)*(15===e?1:0),n[e]-=65536*r}function E(n,r,e){for(var t,o=~(e-1),i=0;16>i;i++)t=o&(n[i]^r[i]),n[i]^=t,r[i]^=t}function m(n,r){var e,t,o,i=new sr,f=new sr;for(e=0;16>e;e++)f[e]=r[e];for(x(f),x(f),x(f),t=0;2>t;t++){for(i[0]=f[0]-65517,e=1;15>e;e++)i[e]=f[e]-65535-(i[e-1]>>16&1),i[e-1]&=65535;i[15]=f[15]-32767-(i[14]>>16&1),o=i[15]>>16&1,i[14]&=65535,E(f,i,1-o)}for(e=0;16>e;e++)n[2*e]=255&f[e],n[2*e+1]=f[e]>>8}function B(n,r){var e=new Uint8Array(32),t=new Uint8Array(32);return m(e,n),m(t,r),u(e,0,t,0)}function S(n){var r=new Uint8Array(32);return m(r,n),1&r[0]}function T(n,r){var e;for(e=0;16>e;e++)n[e]=r[2*e]+(r[2*e+1]<<8);n[15]&=32767}function Y(n,r,e){var t;for(t=0;16>t;t++)n[t]=r[t]+e[t]|0}function L(n,r,e){var t;for(t=0;16>t;t++)n[t]=r[t]-e[t]|0}function C(n,r,e){var t,o,i=new Float64Array(31);for(t=0;31>t;t++)i[t]=0;for(t=0;16>t;t++)for(o=0;16>o;o++)i[t+o]+=r[t]*e[o];for(t=0;15>t;t++)i[t]+=38*i[t+16];for(t=0;16>t;t++)n[t]=i[t];x(n),x(n)}function K(n,r){C(n,r,r)}function R(n,r){var e,t=new sr;for(e=0;16>e;e++)t[e]=r[e];for(e=253;e>=0;e--)K(t,t),2!=e&&4!=e&&C(t,t,r);for(e=0;16>e;e++)n[e]=t[e]}function k(n,r){var e,t=new sr;for(e=0;16>e;e++)t[e]=r[e];for(e=250;e>=0;e--)K(t,t),1!==e&&C(t,t,r);for(e=0;16>e;e++)n[e]=t[e]}function F(n,r,e){var t,o,i=new Uint8Array(32),f=new Float64Array(80),a=new sr,w=new sr,u=new sr,c=new sr,y=new sr,h=new sr;for(o=0;31>o;o++)i[o]=r[o];for(i[31]=127&r[31]|64,i[0]&=248,T(f,e),o=0;16>o;o++)w[o]=f[o],c[o]=a[o]=u[o]=0;for(a[0]=c[0]=1,o=254;o>=0;--o)t=i[o>>>3]>>>(7&o)&1,E(a,w,t),E(u,c,t),Y(y,a,u),L(a,a,u),Y(u,w,c),L(w,w,c),K(c,y),K(h,a),C(a,u,a),C(u,w,y),Y(y,a,u),L(a,a,u),K(w,a),L(u,c,h),C(a,u,_r),Y(a,a,c),C(u,u,a),C(a,c,h),C(c,w,f),K(w,y),E(a,w,t),E(u,c,t);for(o=0;16>o;o++)f[o+16]=a[o],f[o+32]=u[o],f[o+48]=w[o],f[o+64]=c[o];var l=f.subarray(32),s=f.subarray(16);return R(l,l),C(s,s,l),m(n,s),0}function O(n,r){return F(n,r,br)}function z(n,e){return r(e,32),O(n,e)}function N(n,r,e){var t=new Uint8Array(32);return F(t,e,r),h(n,vr,t,mr)}function P(n,r,e,t,o,i){var f=new Uint8Array(32);return N(f,o,i),Sr(n,r,e,t,f)}function I(n,r,e,t,o,i){var f=new Uint8Array(32);return N(f,o,i),Tr(n,r,e,t,f)}function Z(){var n,r,e,t=0,o=0,i=0,f=0,a=65535;for(e=0;e<arguments.length;e++)n=arguments[e].lo,r=arguments[e].hi,t+=n&a,o+=n>>>16,i+=r&a,f+=r>>>16;return o+=t>>>16,i+=o>>>16,f+=i>>>16,new lr(i&a|f<<16,t&a|o<<16)}function j(n,r){return new lr(n.hi>>>r,n.lo>>>r|n.hi<<32-r)}function q(){var n,r=0,e=0;for(n=0;n<arguments.length;n++)r^=arguments[n].lo,e^=arguments[n].hi;return new lr(e,r)}function G(n,r){var e,t,o=32-r;return 32>r?(e=n.hi>>>r|n.lo<<o,t=n.lo>>>r|n.hi<<o):64>r&&(e=n.lo>>>r|n.hi<<o,t=n.hi>>>r|n.lo<<o),new lr(e,t)}function M(n,r,e){var t=n.hi&r.hi^~n.hi&e.hi,o=n.lo&r.lo^~n.lo&e.lo;return new lr(t,o)}function X(n,r,e){var t=n.hi&r.hi^n.hi&e.hi^r.hi&e.hi,o=n.lo&r.lo^n.lo&e.lo^r.lo&e.lo;return new lr(t,o)}function V(n){return q(G(n,28),G(n,34),G(n,39))}function D(n){return q(G(n,14),G(n,18),G(n,41))}function H(n){return q(G(n,1),G(n,8),j(n,7))}function J(n){return q(G(n,19),G(n,61),j(n,6))}function Q(n,r,e){var t,i,a,w=[],u=[],c=[],y=[];for(i=0;8>i;i++)w[i]=c[i]=o(n,8*i);for(var h=0;e>=128;){for(i=0;16>i;i++)y[i]=o(r,8*i+h);for(i=0;80>i;i++){for(a=0;8>a;a++)u[a]=c[a];for(t=Z(c[7],D(c[4]),M(c[4],c[5],c[6]),Yr[i],y[i%16]),u[7]=Z(t,V(c[0]),X(c[0],c[1],c[2])),u[3]=Z(u[3],t),a=0;8>a;a++)c[(a+1)%8]=u[a];if(i%16===15)for(a=0;16>a;a++)y[a]=Z(y[a],y[(a+9)%16],H(y[(a+1)%16]),J(y[(a+14)%16]))}for(i=0;8>i;i++)c[i]=Z(c[i],w[i]),w[i]=c[i];h+=128,e-=128}for(i=0;8>i;i++)f(n,8*i,w[i]);return e}function W(n,r,e){var t,o=new Uint8Array(64),i=new Uint8Array(256),a=e;for(t=0;64>t;t++)o[t]=Lr[t];for(Q(o,r,e),e&=127,t=0;256>t;t++)i[t]=0;for(t=0;e>t;t++)i[t]=r[a-e+t];for(i[e]=128,e=256-128*(112>e?1:0),i[e-9]=0,f(i,e-8,new lr(0,a<<3)),Q(o,i,e),t=0;64>t;t++)n[t]=o[t];return 0}function $(n,r){var e=new sr,t=new sr,o=new sr,i=new sr,f=new sr,a=new sr,w=new sr,u=new sr,c=new sr;L(e,n[1],n[0]),L(c,r[1],r[0]),C(e,e,c),Y(t,n[0],n[1]),Y(c,r[0],r[1]),C(t,t,c),C(o,n[3],r[3]),C(o,o,Ur),C(i,n[2],r[2]),Y(i,i,i),L(f,t,e),L(a,i,o),Y(w,i,o),Y(u,t,e),C(n[0],f,a),C(n[1],u,w),C(n[2],w,a),C(n[3],f,u)}function nr(n,r,e){var t;for(t=0;4>t;t++)E(n[t],r[t],e)}function rr(n,r){var e=new sr,t=new sr,o=new sr;R(o,r[2]),C(e,r[0],o),C(t,r[1],o),m(n,t),n[31]^=S(e)<<7}function er(n,r,e){var t,o;for(d(n[0],pr),d(n[1],gr),d(n[2],gr),d(n[3],pr),o=255;o>=0;--o)t=e[o/8|0]>>(7&o)&1,nr(n,r,t),$(r,n),$(n,n),nr(n,r,t)}function tr(n,r){var e=[new sr,new sr,new sr,new sr];d(e[0],dr),d(e[1],xr),d(e[2],gr),C(e[3],dr,xr),er(n,e,r)}function or(n,e){var t,o=new Uint8Array(64),i=[new sr,new sr,new sr,new sr];for(r(e,32),W(o,e,32),o[0]&=248,o[31]&=127,o[31]|=64,tr(i,o),rr(n,i),t=0;32>t;t++)e[t+32]=n[t];return 0}function ir(n,r){var e,t,o,i;for(t=63;t>=32;--t){for(e=0,o=t-32,i=t-12;i>o;++o)r[o]+=e-16*r[t]*Cr[o-(t-32)],e=r[o]+128>>8,r[o]-=256*e;r[o]+=e,r[t]=0}for(e=0,o=0;32>o;o++)r[o]+=e-(r[31]>>4)*Cr[o],e=r[o]>>8,r[o]&=255;for(o=0;32>o;o++)r[o]-=e*Cr[o];for(t=0;32>t;t++)r[t+1]+=r[t]>>8,n[t]=255&r[t]}function fr(n){var r,e=new Float64Array(64);for(r=0;64>r;r++)e[r]=n[r];for(r=0;64>r;r++)n[r]=0;ir(n,e)}function ar(n,r,e,t){var o,i,f=new Uint8Array(64),a=new Uint8Array(64),w=new Uint8Array(64),u=new Float64Array(64),c=[new sr,new sr,new sr,new sr];W(f,t,32),f[0]&=248,f[31]&=127,f[31]|=64;var y=e+64;for(o=0;e>o;o++)n[64+o]=r[o];for(o=0;32>o;o++)n[32+o]=f[32+o];for(W(w,n.subarray(32),e+32),fr(w),tr(c,w),rr(n,c),o=32;64>o;o++)n[o]=t[o];for(W(a,n,e+64),fr(a),o=0;64>o;o++)u[o]=0;for(o=0;32>o;o++)u[o]=w[o];for(o=0;32>o;o++)for(i=0;32>i;i++)u[o+i]+=a[o]*f[i];return ir(n.subarray(32),u),y}function wr(n,r){var e=new sr,t=new sr,o=new sr,i=new sr,f=new sr,a=new sr,w=new sr;return d(n[2],gr),T(n[1],r),K(o,n[1]),C(i,o,Ar),L(o,o,n[2]),Y(i,n[2],i),K(f,i),K(a,f),C(w,a,f),C(e,w,o),C(e,e,i),k(e,e),C(e,e,o),C(e,e,i),C(e,e,i),C(n[0],e,i),K(t,n[0]),C(t,t,i),B(t,o)&&C(n[0],n[0],Er),K(t,n[0]),C(t,t,i),B(t,o)?-1:(S(n[0])===r[31]>>7&&L(n[0],pr,n[0]),C(n[3],n[0],n[1]),0)}function ur(n,r,e,t){var o,i=new Uint8Array(32),f=new Uint8Array(64),a=[new sr,new sr,new sr,new sr],w=[new sr,new sr,new sr,new sr];if(64>e)return-1;if(wr(w,t))return-1;for(o=0;e>o;o++)n[o]=r[o];for(o=0;32>o;o++)n[o+32]=t[o];if(W(f,n,e),fr(f),er(a,w,f),tr(w,r.subarray(32)),$(a,w),rr(i,a),e-=64,u(r,0,i,0)){for(o=0;e>o;o++)n[o]=0;return-1}for(o=0;e>o;o++)n[o]=r[o+64];return 0}function cr(n,r){if(n.length!==Kr)throw new Error("bad key size");if(r.length!==Rr)throw new Error("bad nonce size")}function yr(n,r){if(n.length!==Nr)throw new Error("bad public key size");if(r.length!==Pr)throw new Error("bad secret key size")}function hr(){for(var n,r={}.toString,e=0;e<arguments.length;e++)if("[object Uint8Array]"!==(n=r.call(arguments[e])))throw new TypeError("unexpected type "+n+", use Uint8Array")}var lr=function(n,r){this.hi=0|n,this.lo=0|r},sr=function(){return new Float64Array(16)},vr=new Uint8Array(16),br=new Uint8Array(32);br[0]=9;var pr=new sr,gr=new sr;gr[0]=1;var _r=new sr;_r[0]=56129,_r[1]=1;var Ar=[30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995],Ur=[61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222],dr=[54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553],xr=[26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214],Er=[41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139],mr=new Uint8Array([101,120,112,97,110,100,32,51,50,45,98,121,116,101,32,107]),Br=new Uint32Array([5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,252]),Sr=A,Tr=U,Yr=[new lr(1116352408,3609767458),new lr(1899447441,602891725),new lr(3049323471,3964484399),new lr(3921009573,2173295548),new lr(961987163,4081628472),new lr(1508970993,3053834265),new lr(2453635748,2937671579),new lr(2870763221,3664609560),new lr(3624381080,2734883394),new lr(310598401,1164996542),new lr(607225278,1323610764),new lr(1426881987,3590304994),new lr(1925078388,4068182383),new lr(2162078206,991336113),new lr(2614888103,633803317),new lr(3248222580,3479774868),new lr(3835390401,2666613458),new lr(4022224774,944711139),new lr(264347078,2341262773),new lr(604807628,2007800933),new lr(770255983,1495990901),new lr(1249150122,1856431235),new lr(1555081692,3175218132),new lr(1996064986,2198950837),new lr(2554220882,3999719339),new lr(2821834349,766784016),new lr(2952996808,2566594879),new lr(3210313671,3203337956),new lr(3336571891,1034457026),new lr(3584528711,2466948901),new lr(113926993,3758326383),new lr(338241895,168717936),new lr(666307205,1188179964),new lr(773529912,1546045734),new lr(1294757372,1522805485),new lr(1396182291,2643833823),new lr(1695183700,2343527390),new lr(1986661051,1014477480),new lr(2177026350,1206759142),new lr(2456956037,344077627),new lr(2730485921,1290863460),new lr(2820302411,3158454273),new lr(3259730800,3505952657),new lr(3345764771,106217008),new lr(3516065817,3606008344),new lr(3600352804,1432725776),new lr(4094571909,1467031594),new lr(275423344,851169720),new lr(430227734,3100823752),new lr(506948616,1363258195),new lr(659060556,3750685593),new lr(883997877,3785050280),new lr(958139571,3318307427),new lr(1322822218,3812723403),new lr(1537002063,2003034995),new lr(1747873779,3602036899),new lr(1955562222,1575990012),new lr(2024104815,1125592928),new lr(2227730452,2716904306),new lr(2361852424,442776044),new lr(2428436474,593698344),new lr(2756734187,3733110249),new lr(3204031479,2999351573),new lr(3329325298,3815920427),new lr(3391569614,3928383900),new lr(3515267271,566280711),new lr(3940187606,3454069534),new lr(4118630271,4000239992),new lr(116418474,1914138554),new lr(174292421,2731055270),new lr(289380356,3203993006),new lr(460393269,320620315),new lr(685471733,587496836),new lr(852142971,1086792851),new lr(1017036298,365543100),new lr(1126000580,2618297676),new lr(1288033470,3409855158),new lr(1501505948,4234509866),new lr(1607167915,987167468),new lr(1816402316,1246189591)],Lr=new Uint8Array([106,9,230,103,243,188,201,8,187,103,174,133,132,202,167,59,60,110,243,114,254,148,248,43,165,79,245,58,95,29,54,241,81,14,82,127,173,230,130,209,155,5,104,140,43,62,108,31,31,131,217,171,251,65,189,107,91,224,205,25,19,126,33,121]),Cr=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]),Kr=32,Rr=24,kr=32,Fr=16,Or=32,zr=32,Nr=32,Pr=32,Ir=32,Zr=Rr,jr=kr,qr=Fr,Gr=64,Mr=32,Xr=64,Vr=64;n.lowlevel={crypto_stream_xor:b,crypto_stream:v,crypto_stream_salsa20_xor:l,crypto_stream_salsa20:s,crypto_onetimeauth:g,crypto_onetimeauth_verify:_,crypto_verify_16:w,crypto_verify_32:u,crypto_secretbox:A,crypto_secretbox_open:U,crypto_scalarmult:F,crypto_scalarmult_base:O,crypto_box_beforenm:N,crypto_box_afternm:Sr,crypto_box:P,crypto_box_open:I,crypto_box_keypair:z,crypto_hash:W,crypto_hashblocks:Q,crypto_sign:ar,crypto_sign_keypair:or,crypto_sign_open:ur,crypto_randombytes:r,crypto_secretbox_KEYBYTES:Kr,crypto_secretbox_NONCEBYTES:Rr,crypto_secretbox_ZEROBYTES:kr,crypto_secretbox_BOXZEROBYTES:Fr,crypto_scalarmult_BYTES:Or,crypto_scalarmult_SCALARBYTES:zr,crypto_box_PUBLICKEYBYTES:Nr,crypto_box_SECRETKEYBYTES:Pr,crypto_box_BEFORENMBYTES:Ir,crypto_box_NONCEBYTES:Zr,crypto_box_ZEROBYTES:jr,crypto_box_BOXZEROBYTES:qr,crypto_sign_BYTES:Gr,crypto_sign_PUBLICKEYBYTES:Mr,crypto_sign_SECRETKEYBYTES:Xr,crypto_hash_BYTES:Vr},n.util={},n.util.decodeUTF8=function(n){var r,e=unescape(encodeURIComponent(n)),t=new Uint8Array(e.length);for(r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t},n.util.encodeUTF8=function(n){var r,e=[];for(r=0;r<n.length;r++)e.push(String.fromCharCode(n[r]));return decodeURIComponent(escape(e.join("")))},n.util.encodeBase64=function(n){if("undefined"==typeof btoa)return new Buffer(n).toString("base64");var r,e=[],t=n.length;for(r=0;t>r;r++)e.push(String.fromCharCode(n[r]));return btoa(e.join(""))},n.util.decodeBase64=function(n){if("undefined"==typeof atob)return new Uint8Array(Array.prototype.slice.call(new Buffer(n,"base64"),0));var r,e=atob(n),t=new Uint8Array(e.length);for(r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t},n.randomBytes=function(n){var e=new Uint8Array(n);return r(e,n),e},n.secretbox=function(n,r,e){hr(n,r,e),cr(e,r);for(var t=new Uint8Array(kr+n.length),o=new Uint8Array(t.length),i=0;i<n.length;i++)t[i+kr]=n[i];return A(o,t,t.length,r,e),o.subarray(Fr)},n.secretbox.open=function(n,r,e){hr(n,r,e),cr(e,r);for(var t=new Uint8Array(Fr+n.length),o=new Uint8Array(t.length),i=0;i<n.length;i++)t[i+Fr]=n[i];return t.length<32?!1:0!==U(o,t,t.length,r,e)?!1:o.subarray(kr)},n.secretbox.keyLength=Kr,n.secretbox.nonceLength=Rr,n.secretbox.overheadLength=Fr,n.box=function(r,e,t,o){var i=n.box.before(t,o);return n.secretbox(r,e,i)},n.box.before=function(n,r){hr(n,r),yr(n,r);var e=new Uint8Array(Ir);return N(e,n,r),e},n.box.after=n.secretbox,n.box.open=function(r,e,t,o){var i=n.box.before(t,o);return n.secretbox.open(r,e,i)},n.box.open.after=n.secretbox.open,n.box.keyPair=function(){var n=new Uint8Array(Nr),r=new Uint8Array(Pr);return z(n,r),{publicKey:n,secretKey:r}},n.box.publicKeyLength=Nr,n.box.secretKeyLength=Pr,n.box.sharedKeyLength=Ir,n.box.nonceLength=Zr,n.box.overheadLength=n.secretbox.overheadLength,n.sign=function(n,r){if(hr(n,r),r.length!==Xr)throw new Error("bad secret key size");var e=new Uint8Array(Gr+n.length);ar(e,n,n.length,r);for(var t=new Uint8Array(Gr),o=0;o<t.length;o++)t[o]=e[o];return t},n.sign.open=function(n,r,e){if(hr(n,r,e),r.length!==Gr)throw new Error("bad signature size");if(e.length!==Mr)throw new Error("bad public key size");var t,o=new Uint8Array(Gr+n.length),i=new Uint8Array(Gr+n.length);for(t=0;Gr>t;t++)o[t]=r[t];for(t=0;t<n.length;t++)o[t+Gr]=n[t];return 0!==ur(i,o,o.length,e)?!1:i.subarray(Gr)},n.sign.keyPair=function(){var n=new Uint8Array(Mr),r=new Uint8Array(Xr);return or(n,r),{publicKey:n,secretKey:r}},n.sign.publicKeyLength=Mr,n.sign.secretKeyLength=Xr,n.sign.signatureLength=Gr,n.hash=function(n){hr(n);var r=new Uint8Array(Vr);return W(r,n,n.length),r},n.hash.hashLength=Vr}("undefined"!=typeof exports?exports:window.nacl=window.nacl||{});